/*! Uni-Form - v1.5.0 - 2013-03-31
* http://sprawsm.com/uni-form/
* Copyright (c) 2013 Dragan Babic; Licensed MIT */
(function(a){a.uniform=function(){},a.uniform.validators={},a.uniform.get_val=function(a,e,t){var l,n=t;for(e=e.split(" "),l=0;e.length>l;l+=1)if(e[l]===a&&"undefined"!==e[l+1]&&"val-"===e[l+1].substr(0,4))return n=parseInt(e[l+1].substr(4),10);return n},a.uniform.get_label_text=function(e,t){var l=e.closest("label").text();return t=t||a.uniform.defaultOptions,""===l&&(l=e.closest("div."+t.holder_class).find("label").text()),l.replace("*","").replace(":","")},a.uniform.validate=function(e,t,l,n,s){var i,r;s=s||a.uniform.defaultOptions,i=e.closest("div."+s.holder_class).andSelf().toggleClass(s.invalid_class,!t).toggleClass(s.error_class,!t).toggleClass(s.valid_class,t).find("p.form-hint"),r=e.attr("name"),t?r in n&&delete n[r]:n[r]=l,t||i.data("info-text")?t&&(l=i.data("info-text")):i.data("info-text",i.html()),l&&i.html(l)},a.fn.uniform=function(e){return e=a.extend(a.uniform.defaultOptions,e),this.each(function(){var t,l,n,s,i,r;t=a(this),l=[],n=a.proxy(a.uniform.get_label_text,this),s=a.proxy(a.uniform.get_val,this),i=a.proxy(a.uniform.validate,this),t.find(e.field_selector).each(function(){var t=a(this),l=t.val();t.data("default-color",t.css("color")),l!==t.data("default-value")&&l||(t.not("select").css("color",e.default_value_color),t.val(t.attr("data-default-value")))}),(e.ask_on_leave||t.hasClass("askOnLeave"))&&(r=t.serialize(),a(window).bind("beforeunload",function(){return r!==t.serialize()&&(e.ask_on_leave||t.hasClass("askOnLeave"))?a.isFunction(e.on_leave_callback)?e.on_leave_callback(t):window.confirm(a.uniform.i18n("on_leave")):void 0})),t.submit(function(){var l,n=!0;return t.removeClass("failedSubmit"),e.ask_on_leave=!1,t.removeClass("askOnLeave"),t.find(e.field_selector).each(function(){a(this).val()===a(this).data("default-value")&&a(this).val("")}),e.prevent_submit||t.hasClass("preventSubmit")?(t.find(e.field_selector).each(function(){a(this).blur()}),a.isFunction(e.submit_callback)&&(n=e.submit_callback(t)),(t.find("."+e.invalid_class).add("."+e.error_class).length||!n)&&(l=a.isFunction(e.prevent_submit_callback)?e.prevent_submit_callback(t,a.uniform.i18n("submit_msg"),[a.uniform.i18n("submit_help")]):a.fn.uniform.showFormError(t,a.uniform.i18n("submit_msg"),[a.uniform.i18n("submit_help")]))):l=!0,t.parents("#qunit-fixture").length&&(l=!1),l===!1&&t.addClass("failedSubmit"),l}),t.delegate(e.field_selector,"focus",function(){t.find("."+e.focused_class).removeClass(e.focused_class);var l=a(this);l.parents().filter("."+e.holder_class+":first").addClass(e.focused_class),l.val()===l.data("default-value")&&l.val(""),l.not("select").css("color",l.data("default-color"))}),t.delegate(e.field_selector,"blur",function(){var l,s,i=a(this),r=!1,o=n(i,e);if(t.find("."+e.focused_class).removeClass(e.focused_class),(""===i.val()||i.val()===i.data("default-value"))&&!i.hasClass("required"))return i.not("select").css("color",e.default_value_color),i.val(i.data("default-value")),void 0;for(l in a.uniform.validators)if(i.hasClass(l)&&(s=a.uniform.validators[l](i,o,e),r=!0,"string"==typeof s))return i.trigger("error",s),void 0;r&&i.trigger("success"),i.css("color",i.data("default-color"))}),t.delegate(e.field_selector,"error",function(t,n){i(a(this),!1,n,l,e)}),t.delegate(e.field_selector,"success",function(){i(a(this),!0,"",l,e)}),a("input[autofocus]:first").focus()})},a.fn.uniform.showFormError=function(e,t,l){var n,s;if(a("#errorMsg").length&&a("#errorMsg").remove(),s=a("<div />").attr("id","errorMsg").html("<h3>"+t+"</h3>"),l.length){s.append(a("<ol />"));for(n in l)l.hasOwnProperty(n)&&a("ol",s).append(a("<li />").text(l[n]))}return e.prepend(s),a("html, body").animate({scrollTop:e.offset().top},500),a("#errorMsg").slideDown(),!1},a.fn.uniform.showFormSuccess=function(e,t){return a("#okMsg").remove(),e.prepend(a("<div />").attr("id","okMsg").html("<h3>"+t+"</h3>")),a("html, body").animate({scrollTop:e.offset().top},500),a("#okMsg").slideDown(),!1},a.uniform.validators.required=function(e,t){var l;return e.is(":radio")?(l=e.attr("name"),a("input[name="+l+"]:checked").length?!0:a.uniform.i18n("req_radio",t)):e.is(":checkbox")?(l=e.attr("name"),e.is(":checked")?!0:a.uniform.i18n("req_checkbox",t)):""===a.trim(e.val())?a.uniform.i18n("required",t):!0},a.uniform.validators.validateMinLength=function(e,t){var l=a.uniform.get_val("validateMinLength",e.attr("class"),0);return l>0&&l>e.val().length?a.uniform.i18n("minlength",t,l):!0},a.uniform.validators.validateMin=function(e,t){var l=a.uniform.get_val("validateMin",e.attr("class"),0);return l>parseInt(e.val(),10)?a.uniform.i18n("min",t,l):!0},a.uniform.validators.validateMaxLength=function(e,t){var l=a.uniform.get_val("validateMaxLength",e.attr("class"),0);return l>0&&e.val().length>l?a.uniform.i18n("maxlength",t,l):!0},a.uniform.validators.validateMax=function(e,t){var l=a.uniform.get_val("validateMax",e.attr("class"),0);return parseInt(e.val(),10)>l?a.uniform.i18n("max",t,l):!0},a.uniform.validators.validateSameAs=function(e,t,l){var n,s,i=e.attr("class").split(" "),r="",o="",u=e.closest("form");for(l=l||a.uniform.defaultOptions,s=0;i.length>s;s+=1)if("validateSameAs"===i[s]&&"undefined"!==i[s+1]){r=i[s+1];break}return r&&(n=u.find('input[name="'+r+'"]'),n.val()!==e.val())?(o=a.uniform.get_label_text(n,l),a.uniform.i18n("same_as",t,o)):!0},a.uniform.validators.validateEmail=function(e,t){return e.val().match(/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)?!0:a.uniform.i18n("email",t)},a.uniform.validators.validateUrl=function(e,t){return e.val().match(/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i)?!0:a.uniform.i18n("url",t)},a.uniform.validators.validateNumber=function(e,t){return e.val().match(/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/)||""===e.val()?!0:a.uniform.i18n("number",t)},a.uniform.validators.validateInteger=function(e,t){return e.val().match(/(^-?\d\d*$)/)||""===e.val()?!0:a.uniform.i18n("integer",t)},a.uniform.validators.validateAlpha=function(e,t){return e.val().match(/^[a-zA-Z]+$/)?!0:a.uniform.i18n("alpha",t)},a.uniform.validators.validateAlphaNum=function(e,t){return e.val().match(/\W/)?a.uniform.i18n("alphanum",t):!0},a.uniform.validators.validatePhrase=function(e,t){return""===e.val()||e.val().match(/^[\w\d\.\-_\(\)\*'# :,]+$/i)?!0:a.uniform.i18n("phrase",t)},a.uniform.validators.validatePhone=function(e,t){var l=/^\(?(\d{3})\)?[\- ]?(\d{3})[\- ]?(\d{4})$/;return l.test(e.val())?!0:a.uniform.i18n("phone",t)},a.uniform.validators.validateDate=function(e,t){return e.val().match("([0]?[1-9]|[1][0-2])/([0]?[1-9]|[1|2][0-9]|[3][0|1])/([0-9]{4}|[0-9]{2})$")?!0:a.uniform.i18n("date",t)},a.uniform.validators.validateCallback=function(e,t){var l,n=e.attr("class").split(" "),s="";for(l=0;n.length>l;l+=1)if("validateCallback"===n[l]&&"undefined"!==n[l+1]){s=n[l+1];break}return"undefined"!==window[s]&&"function"==typeof window[s]?window[s](e,t):a.uniform.i18n("callback",t,s)},a.uniform.i18n=function(e){var t,l,n=a.uniform.language[e],s=n.split("%"),i=s[0],r=/^([ds])(.*)$/;for(l=1;s.length>l;l+=1)t=r.exec(s[l]),t&&null!==arguments[l]&&("d"===t[1]?i+=parseInt(arguments[l],10):"s"===t[1]&&(i+=arguments[l]),i+=t[2]);return i},a.uniform.language={required:"%s is required",req_radio:"Please make a selection",req_checkbox:"You must select this checkbox to continue",minlength:"%s should be at least %d characters long",min:"%s should be greater than or equal to %d",maxlength:"%s should not be longer than %d characters",max:"%s should be less than or equal to %d",same_as:"%s is expected to be same as %s",email:"%s is not a valid email address",url:"%s is not a valid URL",number:"%s needs to be a number",integer:"%s needs to be a whole number",alpha:"%s should contain only letters (without special characters or numbers)",alphanum:"%s should contain only numbers and letters (without special characters)",phrase:"%s should contain only alphabetic characters, numbers, spaces, and the following: . , - _ () * # :",phone:"%s should be a phone number",date:"%s should be a date (mm/dd/yyyy)",callback:"Failed to validate %s field. Validator function (%s) is not defined!",on_leave:"Are you sure you want to leave this page without saving this form?",submit_msg:"Sorry, this form needs corrections.",submit_help:"Please see the items marked below.",submit_success:"Thank you, this form has been sent."},a.uniform.defaultOptions={submit_callback:!1,prevent_submit:!1,prevent_submit_callback:!1,ask_on_leave:!1,on_leave_callback:!1,valid_class:"valid",invalid_class:"invalid",error_class:"error",focused_class:"focused",holder_class:"ctrl-holder",hint_class:"form-hint",field_selector:"input, textarea, select",default_value_color:"#afafaf"}})(jQuery);